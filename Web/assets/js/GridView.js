// Generated by CoffeeScript 1.3.3
(function() {
  var current, data, doc, i, incident, picgrid, win, _i, _len, _ref;

  picgrid = $("#picgrid");

  current = 0;

  data = Window.IncidentList(0, 12);

  _ref = data.Incidents;
  for (_i = 0, _len = _ref.length; _i < _len; _i++) {
    i = _ref[_i];
    incident = Window.CreateIncidentThumbnail(i);
    picgrid.append(incident);
    current++;
  }

  win = $(window);

  doc = $(document);

  win.scroll(function() {
    var _j, _len1, _ref1, _results;
    if (win.scrollTop() + win.height() === doc.height()) {
      console.log("Reached bottom of page");
      data = Window.IncidentList(current, 12);
      _ref1 = data.Incidents;
      _results = [];
      for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
        i = _ref1[_j];
        incident = Window.CreateIncidentThumbnail(i);
        picgrid.append(incident);
        _results.push(current++);
      }
      return _results;
    }
  });

}).call(this);
