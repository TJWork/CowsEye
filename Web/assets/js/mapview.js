// Generated by CoffeeScript 1.3.3
(function() {
  var SetupMap, createModal, googleMap, incident, incidentList, mapCanvas, size, _i, _len, _ref;

  SetupMap = function() {
    var elem, mapCenter, mapOptions;
    mapCenter = new google.maps.LatLng(-41.288889, 174.777222);
    mapOptions = {
      zoom: 9,
      center: mapCenter,
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      disableDefaultUI: true
    };
    elem = document.getElementById('map_canvas');
    return new google.maps.Map(elem, mapOptions);
  };

  googleMap = SetupMap();

  google.maps.event.addDomListener(window, "load", googleMap);

  mapCanvas = $("#map_canvas");

  mapCanvas.css({
    height: "100%"
  });

  incidentList = Window.IncidentList(0, 64);

  size = 0.05;

  createModal = function(incident) {
    var imageBounds, lat, lng, overlay,
      _this = this;
    lat = new google.maps.LatLng(incident.Lat - size, incident.Lng - size * 2);
    lng = new google.maps.LatLng(incident.Lat + size, incident.Lng + size * 2);
    imageBounds = new google.maps.LatLngBounds(lat, lng);
    overlay = new google.maps.GroundOverlay("" + incident.Thumbnail_URL, imageBounds);
    google.maps.event.addListener(overlay, 'click', function() {
      return Window.CreateIncidentModal(incident.Incident_ID);
    });
    return overlay.setMap(googleMap);
  };

  _ref = incidentList.Incidents;
  for (_i = 0, _len = _ref.length; _i < _len; _i++) {
    incident = _ref[_i];
    createModal(incident);
  }

  /*
  for incident in incidentList.Incidents
  
  	newarkLat = new google.maps.LatLng incident.Lat - size, incident.Lng - size * 2
  	newarkLng = new google.maps.LatLng incident.Lat + size, incident.Lng + size * 2
  	
  	borderCoordinates = [
  		new google.maps.LatLng incident.Lat - size, incident.Lng - size * 2
  		new google.maps.LatLng incident.Lat - size, incident.Lng + size * 2
  		new google.maps.LatLng incident.Lat + size, incident.Lng + size * 2
  		new google.maps.LatLng incident.Lat + size, incident.Lng - size * 2
  		new google.maps.LatLng incident.Lat - size, incident.Lng - size * 2
  	]
  	
  	border = new google.maps.Polyline {
  			path: borderCoordinates,
  			strokeColor: "000000",
  			strokeOpacity: 1,
  			strokeWeight: 1
  	}
  
  		
  	border.setMap googleMap
  */


}).call(this);
