// Generated by CoffeeScript 1.3.3
(function() {
  var SetupMap, googleMap, imageBounds, incident, incidentList, mapCanvas, newark, newarkLat, newarkLng, nz, oldmap, size, _i, _len, _ref,
    _this = this;

  SetupMap = function() {
    var elem, mapCenter, mapOptions;
    mapCenter = new google.maps.LatLng(40.5995, 40.8714);
    mapOptions = {
      zoom: 13,
      center: mapCenter,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    elem = document.getElementById('map_canvas');
    return new google.maps.Map(elem, mapOptions);
  };

  googleMap = SetupMap();

  google.maps.event.addDomListener(window, 'load', googleMap);

  mapCanvas = $("#map_canvas");

  mapCanvas.css({
    height: "100%"
  });

  newark = new google.maps.LatLng(40.740, -74.18);

  newarkLat = new google.maps.LatLng(40.716216, -74.213393);

  newarkLng = new google.maps.LatLng(40.765641, -74.139235);

  imageBounds = new google.maps.LatLngBounds(newarkLat, newarkLng);

  oldmap = new google.maps.GroundOverlay("http://placehold.it/480x360", imageBounds);

  google.maps.event.addListener(oldmap, 'click', function() {
    return Window.CreateIncidentModal(2);
  });

  oldmap.setMap(googleMap);

  incidentList = Window.IncidentList(0, 12);

  _ref = incidentList.Incidents;
  for (_i = 0, _len = _ref.length; _i < _len; _i++) {
    incident = _ref[_i];
    size = 0.3;
    newarkLat = new google.maps.LatLng(incident.Lat - size, incident.Lng - size * 2);
    newarkLng = new google.maps.LatLng(incident.Lat + size, incident.Lng + size * 2);
    imageBounds = new google.maps.LatLngBounds(newarkLat, newarkLng);
    oldmap = new google.maps.GroundOverlay("http://placehold.it/480x360", imageBounds);
    google.maps.event.addListener(oldmap, 'click', function() {
      return Window.CreateIncidentModal(2);
    });
    oldmap.setMap(googleMap);
    console.log("created at " + incident.Lat + " " + incident.Lng + " for " + incident.Incident_ID);
  }

  nz = new google.maps.LatLng(-41.288889, 174.777222);

  googleMap.setCenter(nz);

}).call(this);
