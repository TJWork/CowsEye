// Generated by CoffeeScript 1.3.3

/*
Retreive, and create a incident modal dialog box
*/


(function() {
  var Make;

  Make = function(id) {
    var c, comments, commentsSection, data, incidentModal, _i, _len, _ref, _results;
    data = Window.IncidentDetail(id);
    incidentModal = $("<div class=\"modal hide fade in\" id=\"myModal\">		<div class=\"modal-header\">			<button type=\"button\" class=\"close\" data-dismiss=\"modal\">ï¿½</button>			<h3>Mock Incident</h3>		</div>		<div class=\"modal-body\">			<div href=\"#\" class=\"thumbnail\" id=\"testThumbnail\">				<img src=\"" + data.Full_URL + "\" alt=\"\">				</div>			<h2>The Title for " + data.Incident_ID + "</h2>			<p> This is a sample picture to be used as a place holder when testing for content or something and another line for good measure, anlala and some more writing alalala and some more writing alalala and some more writing alalala </p>			<h2>Leave Comment</h2>			<textarea class=\"input-xlarge\" id=\"textarea\" rows=\"3\" style=\"margin: 0px; width: 695px; height: 114px; \"></textarea>			<h2>Comments 2 </h2>			<p></p>			<div id = \"comments\"></div>		</div>		<div class=\"modal-footer\">		<a href=\"#\" class=\"btn btn-success\">Submit Comment for Approval</a>		<a href=\"#\" class=\"btn btn-danger\" data-dismiss=\"modal\">Close Incident</a>						</div>			</div>");
    incidentModal.modal({
      show: true
    });
    comments = Window.CommentsForIncident(id);
    commentsSection = incidentModal.find("#comments");
    console.log("Found comments section");
    _ref = comments["Comments"];
    _results = [];
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      c = _ref[_i];
      console.log("adding coment " + c);
      _results.push(commentsSection.append($("<p>" + c.Comment_Text + "</p>")));
    }
    return _results;
  };

  Window.CreateIncidentModal = Make;

}).call(this);
